@{
    Layout = "_LayoutAdmin";
    var chiffreAffaire = (double)ViewData["ChiffreAffaire"];
    var commission = (double)ViewData["Commission"];
    var pourcentageCommission = (double)ViewData["PourcentageCommission"];
    var benefice = (double)ViewData["Benefice"];
    var depenseTotal = (double)ViewData["DepenseTotal"];
    var totalTrajets = (int)ViewData["TotalTrajets"];
    var totalVoyagesPayes = (int)ViewData["TotalVoyagesPayes"];
    var listeDepense = ViewData["ListeDepense"] as List<Covoiturage.Models.Depense>;
}

<h2 class="mb-4"> Tableau de bord</h2>

<div class="row text-center">
    <div class="col-md-3 mb-3">
        <div class="card bg-success text-white">
            <div class="card-body">
                <h5>Chiffre d'affaires generee</h5>
                <h3>@chiffreAffaire.ToString("N2") Ar</h3>
            </div>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="card bg-warning text-dark">
            <div class="card-body">
                <h5>Commission (@pourcentageCommission %)</h5>
                <h3>@commission.ToString("N2") Ar</h3>
            </div>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="card bg-primary text-white">
            <div class="card-body">
                <h5>Bénéfice</h5>
                <h3>@benefice.ToString("N2") Ar</h3>
            </div>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="card bg-danger text-white">
            <div class="card-body">
                <h5>Total dépenses</h5>
                <h3>@depenseTotal.ToString("N2") Ar</h3>
            </div>
        </div>
    </div>
</div>

<div class="row text-center mt-3">
    <div class="col-md-6 mb-3">
        <div class="card bg-info text-white">
            <div class="card-body">
                <h5>Voyages payés</h5>
                <h3>@totalVoyagesPayes</h3>
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-3">
        <div class="card bg-secondary text-white">
            <div class="card-body">
                <h5>Total trajets</h5>
                <h3>@totalTrajets</h3>
            </div>
        </div>
    </div>
</div>

<hr />

<h4> Dernières dépenses</h4>
<table class="table table-striped table-bordered">
    <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Intitulé</th>
            <th>Montant</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var dep in listeDepense.OrderByDescending(d => d.Date).Take(10))
    {
        <tr>
            <td>@dep.Id</td>
            <td>@dep.Intitule</td>
            <td>@dep.Montant.ToString("N2") Ar</td>
            <td>@dep.Date.ToString("dd/MM/yyyy")</td>
        </tr>
    }
    </tbody>
</table>
